---
title: "SSL/TLS 終了ロードバランサーを通じてアクセスされた場合、AEMは http にリダイレクトします"
description: 「SSL/TLS が終了したロードバランサーを通じてAEMにアクセスする際に http にリダイレクトされるAEMの問題を解決する方法を説明します。」
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS, AEM redirects back to http, SSL/TLS terminated Load Balancer"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Nayanika Chakravarty
article-created-date: "4/6/2024 1:02:31 AM"
article-published-by: Nayanika Chakravarty
article-published-date: "4/6/2024 1:18:10 AM"
version-number: 3
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=0e02b555-b1f3-ee11-904b-0022480a40c2"
source-git-commit: 9a0f496341c426e74804890f92a2b837e9bc7b57
workflow-type: tm+mt
source-wordcount: '406'
ht-degree: 29%

---

# AEMが SSL/TLS 終了ロードバランサーを通じてアクセスした場合、http にリダイレクトします。


この記事では、リダイレクト元のExperience Managerの問題について説明します。 *https* から *http* SSL が終了したロードバランサー（または SSL が終了した CDN）を通じてアクセスしようとしたとき。

## 説明 {#description}


### <b>環境</b>

Adobe Experience Manager

### <b>問題/症状</b>

SSL ターミネーションが有効なロードバランサー（または SSL ターミネーションが有効な CDN）を経由して AEM にアクセスすると、AEM は https から http にリダイレクトします。

ロードバランサーでの SSL ターミネーションとは、ロードバランサーに SSL 証明書がインストールされていることを意味します。エンドユーザーがhttps://を通じてサイトにアクセスし、Dispatcher/Web サーバーとAEMはhttp://を使用してバックエンドでアクセスします。




## 解決策 {#resolution}


問題を修正するには：

<b>I.Update Dispatcher /clientheaders 設定</b>

ロードバランサーがダウンストリームシステムに SSL ターミネーションであることを通知するために設定しているヘッダーを調べるには、お使いのロードバランサーのドキュメントを参照してください。簡単にするため、これらの手順では、正しい HTTP ヘッダーが「*X-Forwarded-Proto: https*&quot;

1. Dispatcher サーバーにログインします。
2. Dispatcher ファームの.any 設定を開きます。
3. /clientheaders セクションにヘッダーを追加します。


ロードバランサーを使用していない場合、またはロードバランサーやプロキシが *X-Forwarded-Proto* ヘッダーを使用する場合は、Web サーバーまたは Dispatcher レベルで設定できます。 を使用している場合、 *Apache HTTP* サーバーに接続してから、 *HTTPS VirtualHost* 次のディレクティブを使用：


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>II. ヘッダー設定を更新する：</b>

1. に移動します。 `http://host:port/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter`管理者としてログインします。
2. 設定 *SSL* ヘッダーを次に転送： *X-Forwarded-Proto です。*
3. 設定 *SSL* ～に価値を転送する *https*.
4. 「<b>保存</b>」をクリックします。


<b>メモ：</b>

どのプロトコルが使用されているかをバックエンドに伝えるリバースプロキシヘッダーの標準はありません。とはいえ、次に、既知のものを示します。

- Amazon ELB(Elastic Load Balancer) は、「X-Forwarded-Proto: https」ヘッダーを使用します。
- Amazon Cloudfront CDN は、「X-Cloudfront-Proto: https」ヘッダーを使用します。


<b>III. Jetty OSGi 設定を更新する（AEM 6.3 以降のバージョン）</b>

AEM 6.3 以降のバージョンでは、次の追加設定が必要です。

- にログインします `http://aem-host:port/system/console/configMgr/org.apache.felix.http.`。
- 設定を有効にする <b>プロキシ/ロードバランサー接続を有効にする</b>をクリックし、保存します。


### 原因

ロードバランサーが異なると、異なるヘッダーが送信されて、バックエンドシステムに *SSL*&#x200B;はアップストリームを終了します。 例： [Amazon ELB はヘッダー「X-Forwarded-Proto: https」を使用します。](https://docs.aws.amazon.com/ja_jp/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).
