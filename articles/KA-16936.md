---
title: 「AEMは、SSL/TLS が終了したロードバランサーを通じてアクセスした場合、ユーザーを http にリダイレクトします。 | AEM"
description: 説明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '362'
ht-degree: 1%

---

# AEMは、SSL/TLS が終了したロードバランサーを通じてアクセスした場合に、ユーザーを http にリダイレクトします。 | AEM

## 説明


SSL によって終了したロードバランサー（または SSL によって終了した CDN）を介してAEMにアクセスする場合、AEMは https から http にリダイレクトします。

ロードバランサーでの SSL の終了とは、SSL 証明書がロードバランサーにインストールされることを意味します。 エンドユーザーがhttps://を通じてサイトにアクセスし、Dispatcher/Web サーバーとAEMはhttp://を使用してバックエンドでアクセスします。



<b>原因</b>：

ロードバランサーが異なると、異なるヘッダーが送信され、SSL がアップストリームで終了したことをバックエンドシステムに通知します。 例： [Amazon ELB はヘッダー「X-Forwarded-Proto:https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## 解像度


&#x200B;&#x200B;&#x200B; &#x200B; &#x200B; &#x200B;問題を修正するには：

<b>I. Dispatcher の/clientheaders 設定を更新する</b>

ロードバランサーのドキュメントを参照して、SSL が終了したことをダウンストリームシステムに通知するために設定するヘッダーを確認します。 簡単にするため、これらの手順では、正しい HTTP ヘッダーが「*X-Forwarded-Proto:https*&quot;

1. Dispatcher サーバーにログインします。
2. Dispatcher ファームの.any 設定を開きます。
3. /clientheaders セクションにヘッダーを追加します。


ロードバランサーを使用していないディスパッチャーを使用している場合、またはロードバランサーやプロキシが X-Forwarded-Proto ヘッダーを設定できない場合は、Web サーバーまたは Dispatcher レベルで設定できます。 Apache HTTP Server を使用している場合は、次のディレクティブで HTTPS VirtualHost を更新します。


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>2. ヘッダー設定の更新：</b>

1. に移動します。 *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter を実行し、管理者としてログインします。
2. SSL forward ヘッダーを X-Forwarded-Proto に設定します。
3. SSL forward 値を https に設定します。
4. 「保存」をクリックします。


注釈:

使用されるプロトコルをバックエンドに伝えるリバースプロキシヘッダーの標準はありません。 ただし、次に、既知の情報を示します。

- Amazon ELB(Elastic Load Balancer) は、「X-Forwarded-Proto:https」ヘッダー。
- Amazon Cloudfront CDN は、「X-Cloudfront-Proto:https」ヘッダー。


<b>三 Jetty OSGi 設定 (AEM 6.3 以降のバージョン ) の更新</b>

AEM 6.3 以降のバージョンでは、次の追加設定が必要です。

- http://aem-host:port/system/console/configMgr/org.apache.felix.httpにログインします。
- 設定を有効にする <b>プロキシ/ロードバランサー接続の有効化</b>をクリックし、保存します。
