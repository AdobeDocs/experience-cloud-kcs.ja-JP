---
title: 「AEMは、SSL/TLS が終了したロードバランサーを通じてアクセスした場合、ユーザーを http にリダイレクトします。 | AEM"
description: 説明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "Helpx Link: https://helpx.adobe.com/experience-manager/kb/AEM-redirecting-back-to-http-on-accessed-via-SSL-terminated-Load-Balancer.html"
bug: false
article-created-by: Emily Geary
article-created-date: "4/12/2021 6:21:34 PM"
article-published-by: Emily Geary
article-published-date: "4/12/2021 6:26:15 PM"
version-number: 1
article-number: KA-16936
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=684ec8e8-bb9b-eb11-b1ac-000d3a3680d8"
exl-id: 52e50c09-67f2-46a2-90a7-df769d76a0dd
source-git-commit: 0c3e421beca46d9fe1952b1f98538a50697216a0
workflow-type: tm+mt
source-wordcount: '341'
ht-degree: 1%

---

# AEMは、SSL/TLS が終了したロードバランサーを通じてアクセスした場合に、ユーザーを http にリダイレクトします。 | AEM

## 説明


SSL によって終了したロードバランサー（または SSL によって終了した CDN）を介してAEMにアクセスする場合、AEMは https から http にリダイレクトします。

ロードバランサーでの SSL の終了とは、SSL 証明書がロードバランサーにインストールされることを意味します。 エンドユーザーは、を通じてサイトにアクセスします。 `https://`、Dispatcher/Web サーバーおよびAEMは、 `http://`.



<b>原因</b>：

ロードバランサーが異なると、異なるヘッダーが送信され、SSL がアップストリームで終了したことをバックエンドシステムに通知します。 例： [Amazon ELB はヘッダー「X-Forwarded-Proto:https&quot;](https://docs.aws.amazon.com/elasticloadbalancing/latest/classic/x-forwarded-headers.html#x-forwarded-proto).


## 解像度


問題を修正するには：

<b>I. Dispatcher の更新 `/clientheaders` 設定</b>

ロードバランサーのドキュメントを参照して、SSL が終了したことをダウンストリームシステムに通知するために設定するヘッダーを確認します。 簡単にするために、これらの手順では、正しい HTTP ヘッダーが *`X-Forwarded-Proto: https`*

1. Dispatcher サーバーにログインします。
2. Dispatcher ファームを開く `.any` 設定。
3. ヘッダーを `/clientheaders` 」セクションに入力します。


ロードバランサーを使用していない場合、またはロードバランサーまたはプロキシが `X-Forwarded-Proto` ヘッダーを使用する場合は、Web サーバーまたは Dispatcher レベルで設定できます。 次を使用する場合： [!DNL Apache HTTP Server]次に、次のディレクティブで HTTPS VirtualHost を更新します。


| 1 | `RequestHeader ` `set` `X-Forwarded-Proto ` `"https"` |
| --- | --- |


<b>2. ヘッダー設定の更新：</b>

1. に移動します。 *http://host:port*/system/console/configMgr/org.apache.felix.http.sslfilter.SslFilter を実行し、管理者としてログインします。
2. SSL 転送ヘッダーをに設定します。 `X-Forwarded-Proto`.
3. SSL forward 値を https に設定します。
4. 「保存」をクリックします。


注釈:

使用されるプロトコルをバックエンドに伝えるリバースプロキシヘッダーの標準はありません。 ただし、次に、既知の情報を示します。

- Amazon ELB ([!DNL Elastic Load Balancer]) は `X-Forwarded-Proto: https` ヘッダー。
- [!DNL Amazon Cloudfront] CDN ではを使用 `X-Cloudfront-Proto: https` ヘッダー。


<b>三 Jetty OSGi 設定 (AEM 6.3 以降のバージョン ) の更新</b>

AEM 6.3 以降のバージョンでは、次の追加設定が必要です。

- http://aem-host:port/system/console/configMgr/org.apache.felix.httpにログインします。
- 設定を有効にする <b>プロキシ/ロードバランサー接続の有効化</b>をクリックし、保存します。
