---
title: 「NULL 値のGraphQL処理の変更 | AEM"
description: 説明
solution: Experience Manager as a Cloud Service
product: Experience Manager as a Cloud Service
applies-to: "Experience Manager as a Cloud Service"
keywords: "KCS, Adobe Experience Manager, GraphQL"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Victoria Barnato
article-created-date: "4/27/2023 7:07:50 PM"
article-published-by: Victoria Barnato
article-published-date: "4/27/2023 7:10:18 PM"
version-number: 6
article-number: KA-21792
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=a1795fca-2ee5-ed11-a7c7-6045bd0061cb"
source-git-commit: 49456a4e39cbbdc507448cf6e6ceb9a2eb1853be
workflow-type: tm+mt
source-wordcount: '692'
ht-degree: 1%

---

# Null 値のGraphQL処理の変更 | AEM

## 説明 {#description}

<b>環境</b><br><br>Experience Manageras a Cloud Service<br><br><br><br><b>問題/症状</b><br><br>リリース2023.02.11382では、 <b>GraphQL</b> 古いリリースの誤った動作に依存する場合に、アプリケーションコードで予期しない動作が発生する可能性のある（オープンソースクエリ言語）実装。 
<br>以下に示す解決方法は、Adobe Experience Manager(AEM)GraphQLが *null* の値は、すべてのフィルター操作で一貫して設定されます。 <br>

## 解決策 {#resolution}

<b>`CONTAINS_NOT` および *null* 値</b><br> <br>最初の変更は、 `CONTAINS_NOT` 演算子 以前のリリースでは、 `CONTAINS_NOT` 次を含むコンテンツフラグメントを返さなかった *null* フィルター条件が適用されたフィールドの値。 これは、次のような類似の演算子とは矛盾します。 `EQUALS_NOT` または `NOT_AT`.<br>お使いのクライアントアプリケーションが *null* AEMが `CONTAINS_NOT`.<br> <br><b>例:</b>

| <b>フラグメントをフィルター</b> | <b>データ</b> | <b>2023.02.11382より前の結果</b> | <b>2023.02.11382で始まる結果</b> |
| --- | --- | --- | --- |
| myField:{<br>    値：「フラグ」 <br>    _op:CONTAINS_NOT<br>} | <br>    {<br>        myField:null<br>    }, <br>    {<br>        myField:&quot;Some text&quot;<br>    },<br>    {<br>        myField:&quot;テキストフラグメント&quot;<br>    }<br> | <br>    {<br>        myField:&quot;Some text&quot;<br>    }<br> | <br>    {<br>        myField:null<br>    },<br>    {<br>        myField:&quot;Some text&quot;<br>    }<br> |

<b>モードの適用 `ALL_OR_EMPTY/ALL` および *null* 値</b>
2023.02.11382で修正された別の問題は、 *null* 複数値フィールドのフィルター条件の値。 適用モード `ALL_OR_EMPTY` （配列/複数値フィールドの）が *null* 問題のフィールドの値は、そのため、実際には `ALL` メソッドを適用します。 同時に、適用モードで複数値フィールドをフィルタリングします `ALL` そのフィールドには空のコンテンツを持つフラグメントが含まれますが、含めないでください。これらの適用モードの 1 つを使用するクエリをテストし、2023.02.11382で期待された結果セットが返されない場合は、クエリを変更することをお勧めします。

この問題は、一部のオペレーター (2023.02.11382以前 ) に対してのみ発生していました。
例： `EQUALS_NOT` 適用法で期待通りに働く `ALL_OR_EMPTY`一方、 `CONTAINS` そうではありません。
<b>例：</b>

| <b>フラグメントをフィルター</b> | <b>データ</b> | <b>2023.02.11382より前の結果</b> | <b>2023.02.11382で始まる結果</b> |
| --- | --- | --- | --- |
| myArray:{<br>  _expressions:{<br>    値：&quot;1.3&quot;<br>    _operator:EQUALS_NOT<br>    _apply:すべて<br>  }<br>} | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:&quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  },<br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |
| myArray:{<br>  _expressions:{<br>    値：「2」<br>    _operator:次を含む<br>    _apply:ALL_OR_EMPTY<br>  }<br>} | <br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> |

<b>モードの適用： `INSTANCES`, `_instances: 0` および *null* 値</b>
最後の問題は、 *null* 複数値フィールドのフィルター条件の値。 適用モード `INSTANCES` と`_instances: 0` 次を含むコンテンツフラグメントと一致しませんでした： *null* 2023.02.11382より前の各フィールドの値。ただし、2023.02.11382で始まります。この配置を使用するクエリをテストし、2023.02.11382で設定された期待される結果が返されない場合は、クエリを変更することをお勧めします。
<b>例：</b>

| <b>フラグメントをフィルター</b> | <b>データ</b> | <b>2023.02.11382より前の結果</b> | <b>2023.02.11382で始まる結果</b> |
| --- | --- | --- | --- |
| myArray:{<br>  _expressions:{<br>    値：「2」<br>    _operator:次を含む<br>    _apply:インスタンス<br>    _instances:0<br>  }<br>} | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:&quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  },<br>  {<br>    myArray:&quot;2.1&quot;, &quot;2.2&quot;, &quot;2.3&quot; <br>  }<br> | <br>  {<br>    myArray:&quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  }<br> | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:&quot;1.1&quot;, &quot;1.2&quot;, &quot;1.3&quot; <br>  }<br> |

<b>のお客様に影響を与える可能性のある改善点 `ft-sites-97` 有効</b>
次の条件を満たす `ft-sites-97`*(GraphQLのページネーションと最適化されたフィルタリング )* 機能フラグが有効 *前*リリース2023.02.11382は、2023.02.11382にアップグレードした後、次の動作の変更が 1 つ以上発生する可能性があります。この機能フラグを有効にしていないお客様は、この節の影響を受けません。
<b>非等価をチェックする条件を持つ null 処理</b>
フラグメントフィールド *null* の値は、非等価をチェックしているフィルターと断続的に一致しませんでした。

コードでこれらのフラグメントが返されないことに依存している場合は、期待される動作に合わせてコードを調整する必要があります。


| <b>フラグメントをフィルター</b> | <b>データ</b> | <b>中間実装の結果</b> | <b>最終実装からの結果</b> |
| --- | --- | --- | --- |
| myField:{<br>  値：「テキスト」<br>  _op:EQUALS_NOT<br>} | <br>  {<br>    myField:null<br>  },<br>  {<br>    myField:&quot;Some text&quot;<br>  },<br>  {<br>    myField:&quot;テキストフラグメント&quot;<br>  }<br> | <br>  {<br>    myField:&quot;Some text&quot;<br>  }<br> | <br>  {<br>    myField:null<br>  },<br>  {<br>    myField:&quot;Some text&quot;<br>  }<br> |

<b>フィルター演算子 `NOT_AT` 日付/時間値</b>
フィルター演算子 `NOT_AT` が断続的に data/times 値で正しく機能しなかった問題を修正しました。 その代わりに、より機能していたのは、 `AFTER` 条件。 
コードで誤った動作が使用されている場合は、フィルター条件をに切り替える必要があります。 `AFTER`.
<b>配列： `INSTANCES` と `_instances: 0` 正しく機能しない</b>
フィルター条件 `INSTANCES` （配列/複数値フィールドの場合） `_instances` 0 に断続的に設定すると、が実際にはがあるはずの場所に何も返されず、期待どおりに動作しなかった。

この問題の影響を受けるフィルターフラグメントは、次のようになります。 `doubleArray: { _expressions: { value: 0, _operator: GREATER, _apply: INSTANCES, _instances: 0 } }`

誤った動作に依存していた場合は、以前と同じ結果を返すようにクエリを書き換える必要があります。


| <b>フラグメントをフィルター</b> | <b>データ</b> | <b>中間実装の結果</b> | <b>最終実装からの結果</b> |
| --- | --- | --- | --- |
| myArray:{<br>  _expressions:{<br>    値：20<br>    _operator:次と等しい<br>    _apply:インスタンス<br>    _instances:0<br>  }<br>} | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:10、20、30 <br>  },<br>  {<br>    myArray:11, 12, 13 <br>  }<br> |  | <br>  {<br>    myArray:null<br>  },<br>  {<br>    myArray:11, 12, 13 <br>  }<br> |

