---
title: 値が 255 文字を超える外部データベースからのデータの取得
description: 説明
solution: Campaign
product: Campaign
applies-to: "Campaign Classic"
keywords: "KCS, ACC, Campaign, RDBMS"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Victoria Barnato
article-created-date: "5/4/2023 1:32:29 AM"
article-published-by: Victoria Barnato
article-published-date: "5/4/2023 1:33:53 AM"
version-number: 4
article-number: KA-21880
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=b9e55082-1bea-ed11-a7c6-6045bd006268"
source-git-commit: 1bf6611c151d5e6d179daa30f26a58c644041d32
workflow-type: tm+mt
source-wordcount: '368'
ht-degree: 1%

---

# 値が 255 文字を超える外部データベースからデータを取得する

## 説明 {#description}

<b>環境</b><br>Campaign Classicv8<br>
<b>問題/症状</b>
外部のGoogleビッグクエリデータベースからデータを取得したいが、テーブルに 255 文字を超える値を含む文字列列が含まれている場合は、この記事が役に立つ可能性があります。 <br>
この場合は、「リレーショナル・データベース管理システム (RDBMS)」アクティビティを使用し、文字列フィールドのサイズはデフォルトで最大 255 文字ですが、この値を超えると、構造化クエリー言語 (SQL) エラーが発生します。

`"PGS-220000 PostgreSQL error: ERROR: value too long for type character varying(255) CONTEXT: COPY wkf124720_17_1, line 1, column scol: "aaaaaaaaaaaaaaa...."`



ワークフローの XML(Extensible Markup Language) コードで直接フィールドの長さを変更しようとすると（手動または JS コードで）、このアクティビティではスキーマの編集と、255 を超える長さの文字列フィールドの管理はできません。



<b>手順:</b>

ワークフローを作成し、アクティビティデータの読み込み (RDBMS) を使用して、255 文字を超える文字列列から外部のGoogleビッグクエリデータベースの値を取得します。

アクティビティ RDBMS の文字列フィールドのデフォルトサイズは最大 255 文字で、これより大きいと SQL エラーが発生します。


## 解決策 {#resolution}

デフォルトでは、Adobe Campaignの文字列フィールドの最大長は 255 です。これは製品の設計によって異なります。<br>
ベストプラクティスと詳細については、 [選択肢](https://experienceleague.adobe.com/docs/campaign-classic/using/configuring-campaign-classic/data-model/data-model-best-practices.html?lang=en#data-types)[のデータ](https://experienceleague.adobe.com/docs/campaign-classic/using/configuring-campaign-classic/data-model/data-model-best-practices.html?lang=en#data-types)[タイプ](https://experienceleague.adobe.com/docs/campaign-classic/using/configuring-campaign-classic/data-model/data-model-best-practices.html?lang=en#data-types) (Campaign Classicv7 ドキュメント )。

また、次に、解決策を見つけるのに役立つオプションを示すリンクを示します（エンリッチメント時に問題が発生した場合）。 [Adobe Campaign Classic v7 および Campaign v8:WKF テーブルフィールドの長さの制御](https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/controlling-wkf-table-field-length/td-p/355506).



<b>最初の「RDBMS」ボックスで問題が発生した場合は、次の手順に従います。</b>



1. 次のコードを含む SQL Box を RDBMS ボックスの前に追加します。

   ```
   CREATE OR REPLACE FUNCTION trg_create_table_func()
   
   RETURNS event_trigger
   
   LANGUAGE plpgsql
   
   AS $$
   
   DECLARE
   
   rec record;
   
   BEGIN
   
   FOR rec IN
   
    SELECT table_name
   
   FROM information_schema.columns
   
   WHERE Lower(table_name) like 'wkf' || %= instance.id % || '_%' AND Lower(column_name)='sproducturl'
   
   LOOP
   
   EXECUTE format('ALTER TABLE IF EXISTS ONLY %I ALTER COLUMN sProductUrl TYPE VARCHAR(2000);', rec.table_name);
   
   EXECUTE format('ALTER TABLE IF EXISTS ONLY %I ALTER COLUMN sDesignation TYPE VARCHAR(2000);', rec.table_name);
   
   EXECUTE format('ALTER TABLE IF EXISTS ONLY %I ALTER COLUMN sUrlImage158 TYPE VARCHAR(2000);', rec.table_name);
   
   EXECUTE format('ALTER TABLE IF EXISTS ONLY %I ALTER COLUMN sUrlImage358 TYPE VARCHAR(2000);', rec.table_name);
   
   EXECUTE format('ALTER TABLE IF EXISTS ONLY %I ALTER COLUMN sUrlImage528 TYPE VARCHAR(2000);', rec.table_name);
   
   END LOOP;
   
   END
   
   
   
   $$;
   
   
   
   DROP EVENT TRIGGER IF EXISTS trg_create_table;
   
   
   CREATE EVENT TRIGGER trg_create_table ON ddl_command_end
   
   WHEN TAG IN ('CREATE TABLE')
   
   EXECUTE PROCEDURE trg_create_table_func();
   ```






   これにより、 `"create table"` イベント。ワークフローの wkfXXX テーブルの目的の列の長さを 2000 に増やす関数をトリガーします。
2. 「RDBMS」ボックスの後に、別の SQL ボックスを追加してトリガーをドロップします。

   `DROP EVENT TRIGGER IF EXISTS trg_create_table;`

