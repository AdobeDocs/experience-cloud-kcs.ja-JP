---
title: DM 配信出力ファイル名に対して使用/クエリを実行できません
description: 説明
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign,Campaign Standard
keywords: KCS - DM 配信出力ファイル名に対して使用/クエリを実行できません
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Karan Khanna
article-created-date: 5/10/2022 3:35:40 PM
article-published-by: Karan Khanna
article-published-date: 5/10/2022 3:36:01 PM
version-number: 2
article-number: KA-16234
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=43c42ad4-76d0-ec11-a7b5-00224809c556
exl-id: e45ff2b0-8e36-4fa2-8270-6a6ddaa0b7aa
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '319'
ht-degree: 1%

---

# DM 配信出力ファイル名に対して使用/クエリを実行できません

## 説明


お客様の 1 人に、いくつかの異なるビジネス要件があるので、次の問題が報告されます。

mdata フィールドから、outputFile 名を抽出します。outputFile=&quot; &quot;に保存されている場所を attachment(mData_outputFile.png) で確認します。 この xml データタイプフィールドを変換してキャンペーンワークフロー内のエンリッチメントされたフィールドとして渡す最善の方法を知りたいので、プロモーション履歴テーブルに追加してすべての出力ファイル名を保存できます。

私は最初に同僚に連絡を取ろうとしましたが、残念ながら、彼らは上記の質問に対する多くの情報を持っていません。 このため、mdata は XML フィールドであり、クエリ対象の DB フィールドではありません。 しかし、それ以外に、このシナリオを達成する方法はありますか？


## 解像度


「ファイル抽出」アクティビティを使用して、配信データを XML 形式で抽出します。



これにより、データも確実に抽出されます。



次に、「ファイル読み込み」アクティビティまたは「 JS コード」アクティビティを使用して、そのファイルを解析し、データを取得できます。



OR



JS コードアクティビティと queryDef を使用して配信のデータを取得し、xml を解析します。



データをインスタンス変数に格納し、トランジションで読み込みます。





お客様には、次のようなフォローアップクエリがありました。

「データに対して queryDef のメソッドを使用しようとしていますが、書き込むことができました。 解析方法の場合、推奨される方法は何ですか？」



<b>回答 —</b>

リクエストは次のようになります



*queryDef operation=&quot;select&quot; schema=&quot;nms:delivery&quot;*

*「*」を選択します

*node expr=&quot;@id&quot;/*

*node expr=&quot;output/@fileName&quot; label=&quot;出力ファイル&quot;/*

*/select*

*sysFilter*

*condition expr=&quot;@isModel = 0&quot;/*

*/sysFilter*

*orderBy*

*node expr=&quot;@lastModified&quot; sortDesc=&quot;true&quot;/*

*/orderBy*

*/queryDef*



そしてそれが戻る

*delivery-collection*

*delivery id=&quot;11878415&quot;*

*output filename=&quot;abc.txt&quot;*

*/output*

*/delivery*

*/delivery-collection*
