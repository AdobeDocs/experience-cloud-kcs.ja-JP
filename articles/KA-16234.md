---
title: DM 配信出力ファイル名に対して使用/クエリを実行できません
description: 説明
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign,Campaign Standard
keywords: KCS - DM 配信出力ファイル名に対して使用/クエリを実行できません
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Karan Khanna
article-created-date: 5/10/2022 3:35:40 PM
article-published-by: Karan Khanna
article-published-date: 5/10/2022 3:36:01 PM
version-number: 2
article-number: KA-16234
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=43c42ad4-76d0-ec11-a7b5-00224809c556
exl-id: e45ff2b0-8e36-4fa2-8270-6a6ddaa0b7aa
source-git-commit: 6a23faae10364181be7dedc2f408f2ad8d8be3c9
workflow-type: tm+mt
source-wordcount: '273'
ht-degree: 1%

---

# DM 配信出力ファイル名に対して使用/クエリを実行できません

## 説明


お客様の 1 人に、いくつかの異なるビジネス要件があるので、次の問題が報告されます。

送信者 `mdata` フィールドに値を指定する場合、outputFile 名を抽出します。 `outputFile=" "`. この xml データタイプフィールドを変換して、 [!DNL Campaign] ワークフローを使用して、すべての出力ファイル名を保存するために、プロモーション履歴テーブルにを追加できます。

私は最初に同僚に連絡を取ろうとしましたが、残念ながら、彼らは上記の質問に対する多くの情報を持っていません。 以来我々は知っている `mdata` は XML フィールドであり、クエリを実行する DB フィールドではありません。 しかし、それ以外に、このシナリオを達成する方法はありますか？


## 解像度


の使用 [!UICONTROL ファイル抽出] 「 」アクティビティを使用して、配信データを XML フォーマットで抽出します。



これにより、データも確実に抽出されます。



その後、 [!UICONTROL ファイルを読み込み] アクティビティまたは [!UICONTROL JS コード] アクティビティを使用して、そのファイルを解析し、データを取得します。



OR



を使用する [!UICONTROL JS コード] アクティビティと `queryDef` 配信のデータを取得し、xml を解析するには、次の手順を実行します。



データをインスタンス変数に格納し、トランジションで読み込みます。





お客様には、次のようなフォローアップクエリがありました。

「我々は方法を使おうとしている `queryDef` 我々が書く事が出来たデータに対して 解析方法の場合、推奨される方法は何ですか？」



<b>回答 —</b>

リクエストは次のようになります


```
*queryDef operation="select" schema="nms:delivery"*

*select*

*node expr="@id"/*

*node expr="output/@fileName" label="Output file"/*

*/select*

*sysFilter*

*condition expr="@isModel = 0"/*

*/sysFilter*

*orderBy*

*node expr="@lastModified" sortDesc="true"/*

*/orderBy*

*/queryDef*
```


そしてそれが戻る

```
*delivery-collection*

*delivery id="11878415"*

*output filename=”abc.txt”*

*/output*

*/delivery*

*/delivery-collection*
```
