---
title: データモデルまたはデータディクショナリの生成方法
description: 説明
solution: Campaign
product: Campaign
applies-to: "Campaign Classic"
keywords: "KCS, Classic, ACC，データモデル，データディクショナリ，使い方"
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Jim Menn
article-created-date: "3/24/2023 1:58:16 AM"
article-published-by: Jim Menn
article-published-date: "3/24/2023 2:15:43 AM"
version-number: 5
article-number: KA-17519
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=42e0f551-e7c9-ed11-b597-6045bd0061cb"
source-git-commit: ac666665ccb1549a78e0d30d349badb50dd29dc9
workflow-type: tm+mt
source-wordcount: '656'
ht-degree: 0%

---

# データモデルまたはデータディクショナリの生成方法

## 説明 {#description}

<b>環境</b><br><br>Campaign Classicv7<br><br> <br><br><br><b>問題/症状</b>
このドキュメントでは、Adobe Campaignデータベースのデータモデルまたはデータディクショナリを生成する 2 つの方法について説明します。


## 解決策 {#resolution}


Adobe Campaignには数百のテーブルが含まれています。 このドキュメントでは、スキーマドキュメントを生成する 2 つの異なる方法を示します。

Open Office ドキュメント (Microsoft Word で読み取り可能 ) を生成するか、HTMLWeb ページを生成する。
<br>メソッド 1:OpenOffice ドキュメントの作成<br> 
Adobe Campaign *datakit\nms\fra\package\optional* ディレクトリ、 <b>dbbBuilder.xml</b>. このパッケージファイルには、Adobe Campaignインスタンスのデータベーススキーマを詳細に記述した Open Office ドキュメントを生成する JavaScript エンティティが含まれています。
<br> 
<b>JavaScript ファイルの作成</b>
<br> 
Campaign コンソールエクスプローラービューを使用して、次の例のように、管理設定 JavaScript コードで簡単な JavaScript ユーティリティを記述します。

strOutputFile 値を変更して、Open Office ドキュメントを作成する宛先ディレクトリを追加します。 例：/tmp/database-description.odt.
<br> 
*ファイルの例： cus:build-dbd.js*


```
/* * build-dbd.js/ var 
    strXslt = "nl:dbdToOdt.xsl" 
    var strTemplate = installDirectory( "datakit/nl/dbd-template.odt" ) 
    var strOutputFile = "database-description.odt" 
    var sql = xtk.sqlSchema.create() sql.Generate() 
    var strDbXml = db = sql.toXML().toXMLString() 
    var strOdt = applyXsl(strXslt, strDbXml) 
    strOdt = strOdt.replace(/\?xml .*\?\r?\n/, '\r\n' ) 
    var mbContent = new MemoryBuffer mbContent.fromString(strOdt, "utf-8" ) 
    var zip = new ZipFile(strTemplate) 
    zip.open() zip.setEntry( "content.xml" , mbContent) zip.save(strOutputFile)
```

<br> <br> 
<b>dbdBuilder.xml をインポート</b>
<br> 
dbdBuilder.xml パッケージは、パッケージが格納されているディレクトリで次のコマンドを実行することでインポートできます。 instance_name をAdobe Campaignインスタンスの実際の名前に置き換えます。

`nlserver package - import :dbdBuilder.xml -instance:instance_name`
<br> 
*Debian のパッケージインポートの例*


```
neolane@debian: /nl6/datakit/nms/fra/package/optional $ cd 
    /nl6/datakit/nms/fra/package/optionalneolane@debian:/nl6/datakit/nms/fra/package/optional$ 
    nlserverpackage -import:dbdBuilder.xml 
    -instance:10:46:09 
    Application serverfor Adobe Campaign Version 6.1.1(build 8537) of 04/16/201410:46:09 
    Starting 1 connection(s) on pool'default vmcloud'(PostgreSQL, server='localhost', 
    login='user:password')10:46:09 Importing package'/tmp/dbdBuilder.xml'...10:46:11 
    Enumerating thefile entities...10:46:11 
    Writing entitiesin the database...10:46:11 
    Saving entities oftype 'xtk:xslt'...10:46:12 
    Saving entities oftype 'xtk:javascript'...10:46:12 
    Installation of packages successful.
```


Windows のパッケージインポートの例


```
C: cd "\Program Files (x86)\Adobe\Adobe Campaign v6\bin" 
    C:\Program Files (x86)\Adobe\Adobe Campaign v6\binnlserver.exe 
    package - import : ..\datakit\nms\fra\package\optional\dbdBuilder.xml 
    -instance: 13:52:57 Application server for Adobe Campaign Version 6.1.1 (build 8622) of 01 /19/2015 13:52:57 
    Starting 1 connection(s) on pool 'default ' (PostgreSQL, server= 'localhost' , login= 'user:password' ) 13:52:57
    Importing package 'C:\Program Files (x86)\Adobe\Adobe Campaign v6\bin\..\datakit\nms\fra\package\optional\dbdBuilder.xml'... 
    13:52:59 Enumerating the file entities... 
    13:52:59 Writing entities in the database... 
    13:52:59 Saving entities of type 'xtk:javascript' ... 
    13:52:59 Installation of packages successful.
```

<br> 
<b>データベースの説明を生成</b>
<br> 
データベースの説明を生成するには、次に示すように、コマンドラインを使用して nlserver モジュールで cus:build-dbd.js JavaScript エンティティを実行します。


```
neolane@debian: /tmp $ nlserver javascript -instance: cus:build-dbd.js 05:06:12 
    Application server for Adobe Campaign Version 6.1.1 (build 8537) of 04 /16/2014 
    05:06:12 Starting 1 connection(s) on pool 
    'default vmcloud' (PostgreSQL, server= 'localhost' , login= 'user:vmcloud' ) 
    05:06:12 Executing JavaScript from entity of identifier 'xs:build-dbd.js' ... 
    05:06:12 Generating the database structure... 
    05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 
    05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Recipient delivery logs (nms:broadLogRcp)'). 
    (iRc=16384) 05:06:12 Element '0' unknown (see definition of schema 'Visitor delivery logs (nms:broadLogVisitor)'). 
    (iRc=16384) 05:06:13 Generating the ODT XML... 05:06:14 Saving the zip file ... 
    05:06:14 File saved as 'database-description.odt
```

<br> 
「database-description.odt」という名前の OpenOffice ドキュメントが、build-dbd.js で指定したディレクトリに生成されます。 このリストには、Adobe Campaignテーブルの説明が含まれます。 このドキュメントは、Microsoft Word または OpenOffice で編集でき、PDFに変換できます。
![database-description](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr%3acontent/main-pars/image/database-description.gif "database-description")データモデルファイルの例<br> 
このドキュメントでは、データベーステーブルのインデックス、SQL フィールドとキー、およびスキーマリンクのリストを示します。
<br> 方法 2:xsltproc を使用した Web ページの作成<br> 
この代替手法は、Linux の xsltproc コマンドラインツールに基づいています。 このシナリオでは、XML ドキュメントを作成してスキーマを書き出し、XSLT ファイルを使用して XML をHTMLに変換します。 出力ファイルはブラウザーで表示可能です。

この方法では、次が必要です。

- xsltproc を実行する Linux または Macintosh 環境。これは、Macintosh のMac OS X の標準コマンドラインユーティリティです。
- 添付ファイル、database.xsl および styles.xml（attachments.zip を参照）


メモ：

同等の Windows があります。 <b>msxsl.exe</b>は、そのプラットフォームで正常に機能します。 <b>しかしそれは検証されていない</b>.

今すぐ <b>msxsl.exe</b> は、 <b>MS Core XML Services (MSXML)</b>.

この <b>[MS Core XML Services](https://www.catalog.update.microsoft.com/Search.aspx?q=Microsoft%20Core%20XML%20Services%20%28MSXML%29%204.0)</b><b>[(MSXML)](https://www.catalog.update.microsoft.com/Search.aspx?q=Microsoft%20Core%20XML%20Services%20%28MSXML%29%204.0)</b> ダウンロードは、 Microsoft Update Catalog にあります。



ダウンロード
[ファイルを取得](https://helpx.adobe.com/content/dam/help/en/campaign/kb/generate-data-model/jcr:content/main-pars/download_123504941/attachments.zip "attachments.zip") <br>database.xsl と styles.xml<br> <br> <br> 
1. 2 つの添付ファイル database.xsl と styles.xml を Linux またはMacの作業ディレクトリにダウンロードします。 XSL の上部には、調整できる 2 つの変数があります。xsl:variable name=&quot;unicode&quot;false/xsl:variable xsl:variable name=&quot;engine&quot;postgresql/xsl:variable エンジンでサポートされている値は次のとおりです。postgresql、mssql およびoracle。 エンジン変数を、マーケティングインスタンスデータベースに対応する値に設定します。
2. Campaign コンソールで、管理設定パッケージ管理パッケージ定義に移動し、データスキーマ (xtk:schema) を格納した package.xml ファイルを作成します。
3. パッケージをエクスポートし、そのファイルを Linux またはMacの作業ディレクトリにコピーします。
4. XSLT を使用して作業ディレクトリで次のコマンドを実行し、package.xml ファイルを処理します。 *xsltproc database.xsl package.xml database.html*.


生成されたドキュメントは完全ではありません：

- リンクの一部の結合条件はドキュメント化できません。
- 列挙がスキーマで参照されているが、パッケージに含まれていない別のスキーマで定義されている場合、列挙はドキュメントに記載されていません。

