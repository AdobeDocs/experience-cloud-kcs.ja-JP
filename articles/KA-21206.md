---
title: 「サブアセットステータスがアセットに表示される」
description: 説明
solution: Experience Manager as a Cloud Service,Experience Manager
product: Experience Manager as a Cloud Service,Experience Manager
applies-to: "Experience Manager as a Cloud Service,Experience Manager 6.5,Experience Manager"
keywords: 「KCS」
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Tanay Sharma .
article-created-date: "1/19/2023 10:35:09 AM"
article-published-by: Tanay Sharma .
article-published-date: "1/19/2023 10:52:59 AM"
version-number: 2
article-number: KA-21206
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=f3bef6ef-e497-ed11-aad1-6045bd006e5a"
source-git-commit: c90b524c1c26fb8179dd3a624737640d96accf3e
workflow-type: tm+mt
source-wordcount: '426'
ht-degree: 78%

---

# サブアセットステータスがアセットに表示される

## 説明 {#description}

<b>環境</b>
- Adobe Experience Manager
- Adobe Experience Manager 6.5



<b>問題/症状</b>
アセットの参照中、一部のアセットに「SUB-ASSET」ステータスが表示されます。

![](assets/___f5bef6ef-e497-ed11-aad1-6045bd006e5a___.png)

これはどういう意味ですか？


## 解決策 {#resolution}


<b>*サブアセット</b>*&#x200B;ステータスは、*Digital Rights Management* の有効期限が切れた<b>関連アセット</b>がアセットにある場合に相当します。

これは、メインアセット自体の有効期限が切れたシナリオの具体的なケースで、以下で説明しています。

[https://experienceleague.adobe.com/docs/experience-manager-65/assets/administer/drm.html?lang=ja#asset-expiration](https://experienceleague.adobe.com/docs/experience-manager-65/assets/administer/drm.html?lang=ja#asset-expiration)

アセットのプロパティ「*基本*」タブを開いて、*赤フラグ*&#x200B;アイコンを確認することで、どの関連アセットの有効期限が切れているかを確認できます。

![](assets/6269940b-b98a-ed11-81ac-6045bd006ce9.png)



対象となる<b>関連アセット</b>は次の 2 種類です。

<u><b>#1 - アセットがサブページを持つ PDF の場合</b></u>

PDF からページを抽出するように「DAM アセットの更新」を変更した場合、ドキュメントページのサブアセットが作成されます。

抽出された各ページはメインアセットの下の「/subassets」という名前のサブノード/フォルダーに保存されているアセットで、DRM を含むメタデータプロパティを持ちます。 *有効期限* 日付 *詳細*&#x200B;タブをクリックします。

*有効期限*&#x200B;日付が過ぎている場合は、次のように表示されます。

- の <b>*期限切れ</b>* （左上のパネルを使用して）メインPDFのサブアセットを参照する際のこのサブページ/アセットのステータス *コンテンツのみ* 表示 *サブアセット*)
- メイン PDF に戻る際の&#x200B;<b>*サブアセット</b>*&#x200B;ステータス


これは、次のページ 0 に記載されています。



<u><b>#2 - アセットに参照アセットがある場合</b></u>

あらゆるタイプのアセットで、他のアセットを参照できます。<b>*サブアセット</b>*&#x200B;のステータスも、これらの各参照の&#x200B;*有効期限*&#x200B;日付を調べることで計算されます。

これらの参照は、次のプロパティに保存されます。

`asset/jcr:content/related/links/sling:members/sling:resources`

<u>メモ：</u>

アセットの参照が多すぎる（数千件）場合、アセットのプロパティを表示しようとすると、UI のパフォーマンスの問題が発生する可能性があります。

これらすべての参照のステータスを確認／計算するには時間がかかりすぎる場合があり、プロパティを開くリクエストがタイムアウトします。

参照が多すぎると、パフォーマンスの問題が発生する可能性があるので、調査する必要があります。

[https://jackrabbit.apache.org/oak/docs/dos_and_donts.html#Large_Multi_Value_Property](https://jackrabbit.apache.org/oak/docs/dos_and_donts.html#Large_Multi_Value_Property)

この問題を解決するには、関連するこれらの参照に価値がない場合、CRX/DE から次のフォルダー／サブノードを削除できます。

*/content<b>t*`/.../asset/jcr:content/related/links`



<u><b>#3 - 期限切れアセットを確認するためのヒント</b></u>

次の JCR SQL2 クエリを使用して、有効期限に達したリポジトリ内のすべてのアセットをリストできます。

`SELECT * FROM dam:Asset WHERE jcr:content/metadata/prism:expirationDate  cast('2023-01-02T17:00:00.000Z' as date)`



日付を現在の時刻（GMT 形式）に変更します。
