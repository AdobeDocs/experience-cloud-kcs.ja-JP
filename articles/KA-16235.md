---
title: Campaign Classic- SHA256 および SHA512 関数が誤ったハッシュを返す第 2 の更新
description: 説明
solution: Campaign
product: Campaign
applies-to: Campaign Classic,Campaign
keywords: KCS - SHA256 および SHA512 関数が誤ったハッシュを返す第 2 の更新
resolution: Resolution
internal-notes: https://jira.corp.adobe.com/browse/NEO-26500, E-000202021, E-000148142
bug: true
article-created-by: Marta Zator
article-created-date: 5/9/2022 2:40:05 PM
article-published-by: Marta Zator
article-published-date: 5/9/2022 2:45:38 PM
version-number: 2
article-number: KA-16235
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=cac10be5-a5cf-ec11-a7b5-0022480a8e40
exl-id: d8803e40-5813-4fd4-921d-df10956e1e74
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '265'
ht-degree: 1%

---

# Campaign Classic- SHA256 および SHA512 関数が誤ったハッシュを返す第 2 の更新

## 説明


お客様から、SHA256 および SHA512 関数が誤ったハッシュを返すと報告されました。

この問題を抱えるユーザーもいることがわかりました。
https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-function-returns-wrong-hash/qaq-p/351035/comment-id/3882


## 解像度


お客様は、次の点に関して発見したソリューションを共有しました。

この問題は、DB が Unicode エンコーディングを使用している場合、Adobeが文字列データ型を varchar ではなく nvarchar に変換するために発生していました。
お客様の場合、データベースエンコーディングのデフォルトは、タイ語をサポートするために unicode として使用されます。 そのため、Adobeは文字列を nvarchar に変換しました。

関数 SHA256 および SHA512 の場合、通常どおりに動作しますが、varchar と nvarchar の場合は異なるハッシュ値が返されます。

お客様の場合、そのフィールド（携帯電話番号のみを含む）を varchar に変更し、正しくハッシュ化することが可能でした。

Adobeコミュニティの記事：
[https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034](https://experienceleaguecommunities.adobe.com/t5/adobe-campaign-classic-questions/sha256-and-sha512-functions-returning-wrong-hash/qaq-p/351034)



また、Sql Server を使用する場合、ダイジェスト関数は文字列の utf-16 表現を使用します。 （多くの場合、ascii 文字または ut-8 文字で計算される）期待されたダイジェストは取得されません。

例：「hello」の場合は、文字列の ascii/utf-8 表現で 14cde7c9ad35de5a37fce2ac276742175028fd9f7cdf0dae01ff508b126429d9 が sha2-256 に設定され、18fe2820b38427a08a5b が設定されます。utf-16 表現での 49fb4d71a7027799bfe0050d3050ca4d3491a85aa0eb。
