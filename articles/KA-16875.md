---
title: AEMでの TarMK インスタンスのクローン作成方法
description: 説明
solution: Experience Manager
product: Experience Manager
applies-to: "Experience Manager"
keywords: "KCS"
resolution: Resolution
internal-notes: "From https://helpx.adobe.com/experience-manager/kb/how-to-clone-an-AEM-TarMK-instance-AEM.html"
bug: false
article-created-by: Emily Geary
article-created-date: "3/24/2021 11:36:07 PM"
article-published-by: Emily Geary
article-published-date: "3/24/2021 11:37:50 PM"
version-number: 2
article-number: KA-16875
dynamics-url: "https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=371b76b1-f98c-eb11-a812-000d3a58b9d1"
exl-id: d9c35199-775f-4f24-8d30-3828bb11e7f6
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '196'
ht-degree: 2%

---

# AEMでの TarMK インスタンスのクローンの作成方法

## 説明


この記事では、TarMK（または TarMK + FileDataStore）を使用するAEMインスタンスをストレージに適切にクローンする方法について説明します。


## 解像度


以下の手順は、AEMが/mnt/aem/author にインストールされている Linux で rsync を使用してAEM + TarMK + FileDataStore インスタンスをコピーする方法を示しています。

1. rsync のようなコマンドを使用して実行中に、完全なAEMインスタンスを別のサーバーにコピーします。  コピープロセス中にタイムスタンプを必ず保持し、logs フォルダーとデータストアを除外します。  例： `rsync -av --exclude 'crx-quickstart/logs' --exclude 'crx-quickstart/repository/repository/datastore' /mnt/aem/author user@dest-host:/mnt/aem/`
2. AEMを停止
3. TarMK segmentstore フォルダーの別のコピーを開始して、最初のコピーがおこなわれてから新しい変更を取得します。 `rsync -av /mnt/aem/author/crx-quickstart/repository/segmentstore/* user@dest-host:/mnt/aem/author/crx-quickstart/repository/segmentstore/`
4. AEM を起動します。
5. AEMの実行中にデータストアをコピーします。 例： `rsync -av /mnt/aem/author user@dest-host:/mnt/aem/crx-quickstart/repository/repository/datastore /mnt/aem/crx-quickstart/repository/repository/`
6. 宛先サーバーで、logs フォルダーを再作成し、crx-quickstart/repository/index フォルダーを削除し、crx-quickstart/launchpad/felix フォルダーからsling.id.file を削除します。

`mkdir /mnt/aem/crx-quickstart/logs`

`rm -rf /mnt/aem/crx-quickstart/repository/index`

`find /mnt/aem/crx-quickstart/launchpad/felix -type f -name "sling.id.file" -exec rm -f {} \; -print`
7.宛先サーバーで、AEMを起動し、インスタンスをテストします。


<b>重要な注意：</b>

データストアが segmentstore フォルダーの後にコピーされ、コピー中にすべてのタイムスタンプが保持されていることを確認する必要があります。  Rsync を使用すると、タイムスタンプを —a オプションで保持できます。
