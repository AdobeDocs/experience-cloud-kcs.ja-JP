---
title: トラッキングワークフローロジック
description: 説明
solution: Campaign,Campaign Classic v7,Campaign v8
product: Campaign,Campaign Classic v7,Campaign v8
applies-to: Campaign Classic,Campaign,Campaign Classic v7,Campaign v8
keywords: KCS，トラッキングワークフローロジック
resolution: Resolution
internal-notes: null
bug: false
article-created-by: Ananya Kuthiala
article-created-date: 5/10/2022 1:38:14 PM
article-published-by: Ananya Kuthiala
article-published-date: 5/10/2022 1:38:54 PM
version-number: 2
article-number: KA-17739
dynamics-url: https://adobe-ent.crm.dynamics.com/main.aspx?forceUCI=1&pagetype=entityrecord&etn=knowledgearticle&id=b1655370-66d0-ec11-a7b5-0022480a8e40
exl-id: fddd4869-ca73-4875-ae46-563272a7d172
source-git-commit: e8f4ca2dd578944d4fe399074fab461de88ad247
workflow-type: tm+mt
source-wordcount: '382'
ht-degree: 0%

---

# トラッキングワークフローロジック

## 説明


トラッキングワークフローでは、1 つのコマンドのみが表示され、多くの説明は表示されません。 <b>tracking -instance:%= instanceName % -download -update</b>



このナレッジベース記事の目的は、バックエンドでのワークフローの手順を一覧表示することです。

<b>手順 1</b>  — データベース (NmsTrackingLogXXX) のトラッキングログをダウンロードして挿入します。 -download ステップ中、ワークフローは何も記録しません。

-download は、別のトラッキングコンテナからのトラッキングログのみを取得し、データベースに保存します。

<b>手順 2</b>  — トラッキングログ統計 (NmsTrackingStats) を作成します。

-update を指定すると、NmsTrackingStats で集計レコードを作成してログを統合します。 更新のマークが付けられた配信に基づいて、テーブル全体が更新されます。 すべてのトラッキングレポートは、このテーブルからデータを取得しています。 この手順は、「配信統計を再計算」をクリックして、トラッキング統計が欠落している配信ごとに手動で実行できます。

<b>手順 3</b> 最終的な 1 つ — 開封またはクリックの影響を受けたすべての配信の配信統計 (NmsDeliveryLogStats) を再構築します（配信者は 1 つずつ処理されます…）

また、トラッキングワークフローは、他の複数のテーブルも更新します。

NmsUserAgentReject NmsDelivery NmsUserAgent NmsTrackingLogRcp NmsTrackingStats

これらのテーブルのインデックスの断片化率を確認することが重要です。 <u>インデックスの断片化が 30～35%を超える場合は、インデックスを再構築する必要があります。</u> ホストクライアントの場合、Adobeはこのメンテナンス操作を月に 1 回実行します。 テーブルのインデックスが定期的に再構築されない場合、トラッキングワークフローの実行が遅くなります。

<b>トラッキングワークフローで実行された正確なクエリを確認するには、次のコマンドを使用します。</b>

*nlserver tracking -instance:instanceName -download -update -verbose -tracefilter:\&lt;b>

このコマンドは、追加のログを </b>/var/instanceName/log/tracking.log <b>を含め、トラッキングワークフローの実行中に実行されるすべてのクエリ。

更新プロセスをスキップできるかと尋ねられる場合がありますが、 答えは NO です。トラッキング統計は更新されず、データは無効になり、トラッキングに関する他の問題が多数発生する可能性があります。これは、必要に応じて回避したいものです。

トラッキングワークフローの実行が完了したら、「 」オプションを選択します </b>NmsTracking_Pointer <b>が更新されました。 オプションの値には、すべてのトラッキングサーバーコンテナで最後に取得されたログの日付と、メッセージ ID が 10 進形式で表示されます。 この ID を 16 進数に変換すると、トラッキングサーバーに保存されているトラッキングファイルの名前になります。


## 解像度


この記事では、解決を必要としないように、ワークフローのロジックについて説明します。
